!function (s) { s.fn.extend({ viewloads: function (t) { var e = { cssitems: ".element-item", csslink: ".link-view", idbox: "loadView", idurl: "#productView", cssactive: "current", datattr: "data-url", onready: function () { } }, t = s.extend(e, t); return this.each(function () { var e = t, i = s(this), r = s(e.cssitems, i), a = s(e.csslink, i); a.click(function () { if (!s(this).hasClass(e.cssactive)) { a.removeClass(e.cssactive).parents(e.cssitems).addClass("blur-box"), s(this).addClass(e.cssactive).parents(e.cssitems).removeClass("blur-box"), s("#" + e.idbox).remove(); var t = s(this).parents(e.cssitems).index(), o = s(this).parents(e.cssitems).outerWidth(), n = i.outerWidth() + 3, c = r.size(), d = parseInt(n / o), l = parseInt(t / d) + 1, u = l * d - 1; u >= c && (u = c - 1); var v = s(this).attr(e.datattr) + " " + e.idurl; r.filter(":eq(" + u + ")").after('<div id="' + e.idbox + '" class="wrap-view"></div>'); var m; clearTimeout(m), m = setTimeout(function () { s("#" + e.idbox).load(v, function (t, o, n) { if (s("#" + e.idbox).find(".closea").click(function () { return s("#" + e.idbox).stop(!0, !0).animate({ height: 0 }, 500, function () { s(this).remove(), a.removeClass(e.cssactive).parents(e.cssitems).removeClass("blur-box") }), !1 }), "success" == o) { e.onready.call(this), s("#" + e.idbox).stop(!0, !0).animate({ height: "100%" }, 500), s(window).resize(function () { var t = a.filter("." + e.cssactive).parents(e.cssitems).index(), o = a.filter("." + e.cssactive).parents(e.cssitems).outerWidth(), n = i.outerWidth() + 3, c = r.size(), d = parseInt(n / o), l = parseInt(t / d) + 1, u = l * d - 1; u >= c && (u = c - 1), r.filter(":eq(" + u + ")").after(s("#" + e.idbox)) }); var c = s("#" + e.idbox).offset(); s("html, body").stop(!0, !0).animate({ scrollTop: c.top - 50 }, 500) } if ("error" == o) { var d = "Sorry but there was an error: "; s("#" + e.idbox).html(d + n.status + " " + n.statusText) } }) }, 0) } return !1 }) }) } }) }(jQuery);